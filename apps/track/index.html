<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” Consulta de Cajas - Sistema de Rastreo</title>
    <link rel="stylesheet" href="../../shared/css/variables.css">
    <link rel="stylesheet" href="../../shared/css/base.css">
    <link rel="stylesheet" href="../../shared/css/components.css">
    <link rel="stylesheet" href="../../shared/css/track.css">
</head>
<body>
    <div class="notification-container" id="notifications"></div>
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text" id="loading-text">Cargando bases de datos...</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="loading-progress" id="loading-progress">0/9 completadas</div>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ” Sistema de Consulta de Cajas</h1>
            <p>Rastreo unificado de mercancÃ­a - Consulta informaciÃ³n de mÃºltiples fuentes</p>
            <button class="refresh-db-btn" onclick="forceReloadData()">
                ğŸ”„ Actualizar BD
            </button>
        </div>

        <!-- Reload Banner -->
        <div class="reload-banner" id="reload-banner">
            <div class="reload-banner-text">
                âš ï¸ Han pasado mÃ¡s de 30 minutos. Se recomienda recargar las bases de datos para informaciÃ³n actualizada.
            </div>
            <button class="btn btn-primary" onclick="forceReloadData()">
                ğŸ”„ Recargar Ahora
            </button>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <div class="search-row">
                <input
                    type="text"
                    class="search-input"
                    id="search-input"
                    placeholder="Ingresa cÃ³digo de caja o nÃºmero de orden..."
                    autocomplete="off"
                >
                <button class="btn btn-primary" onclick="performSearch()" id="search-btn">
                    ğŸ” Buscar
                </button>
                <button class="btn btn-secondary" onclick="clearSearch()">
                    ğŸ—‘ï¸ Limpiar
                </button>
            </div>
            <div class="search-tips">
                ğŸ’¡ <strong>Tips:</strong> Busca por cÃ³digo completo (ej: PLEC25071567355U010), cÃ³digo base (PLEC25071567355) o nÃºmero de orden (OBC2832510050RV)
            </div>
            <div class="search-mode-toggle">
                <div class="search-mode-label">ğŸ¯ Modo de BÃºsqueda Global:</div>
                <label class="toggle-switch">
                    <input type="checkbox" id="global-mode-toggle" onchange="toggleGlobalSearchMode()">
                    <span class="toggle-slider"></span>
                </label>
                <span class="toggle-status exact" id="global-mode-status">Solo Exactas</span>
            </div>
        </div>

        <!-- Results Container -->
        <div class="results-container" id="results-container">
            <!-- Summary Card -->
            <div class="summary-card" id="summary-card"></div>

            <!-- Section Cards -->
            <div id="sections-container"></div>
        </div>

        <!-- Search Preloader -->
        <div class="search-preloader" id="search-preloader">
            <div class="spinner"></div>
            <div class="search-preloader-text">ğŸ” Buscando en todas las bases de datos...</div>
            <div class="search-preloader-subtext">Esto tomarÃ¡ solo un momento</div>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="empty-state">
            <div class="empty-icon">ğŸ“¦</div>
            <div class="empty-text">Ingresa un cÃ³digo para buscar</div>
            <div class="empty-subtext">El sistema buscarÃ¡ en todas las bases de datos disponibles</div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
